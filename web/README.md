# Hospital Shift Analysis Website

A comprehensive web interface for analyzing hospital shift data from April 2014 to January 2020.

## Features

### 📊 Monthly Statistics
- **Legal Workday Calculation**: `legalWorkdayCount = totalDays - legalHolidays`
- **Saved Rest Days**: `savedRestDays = legalWorkdayCount - workValue`
- Complete monthly breakdown for each nurse
- Sortable statistics by work value, saved rest days, work days, or name
- Monthly summary with totals and averages

### 👩‍⚕️ Person Details
- Individual nurse career overview
- Year-by-year breakdown
- Month-by-month statistics with legal workday calculations
- Interactive calendar view showing daily shifts
- Color-coded shift types (work/rest/holiday/sick)

### 📈 Overview Dashboard
- Top performers ranking
- Shift type distribution
- Yearly trends analysis
- Work pattern statistics

## Key Calculations

### Legal Workday Count
For each month, calculates the number of days that should normally be worked:
```javascript
legalWorkdayCount = totalDaysInMonth - legalHolidays
```

### Saved Rest Days
Shows how many rest days each person "saved" (didn't take):
```javascript
savedRestDays = legalWorkdayCount - actualWorkValue
```

### Work Rate
Percentage of legal workdays actually worked:
```javascript
workRate = (workValue / legalWorkdayCount) * 100
```

## Data Structure

### Monthly View
For each month, displays for each person:
- **Legal Work Days**: Days they should work (excluding holidays)
- **Work Value**: Actual work units completed
- **Saved Rest Days**: Legal work days minus work value
- **Work Rate**: Percentage of expected work completed
- **Work Days**: Number of days actually worked
- **Rest Days**: Number of rest days taken
- **Night/Day Shifts**: Breakdown by shift type
- **Holiday/Weekend Work**: Special shift counts
- **Sick Leave**: Days on sick leave

### Person Detail View
For each person, shows:
- **Career Overview**: Total statistics across all years
- **Monthly Breakdown**: Month-by-month statistics with legal workday calculations
- **Calendar View**: Visual representation of daily shifts with color coding

## Usage

### Starting the Web Server
```bash
cd web
python3 -m http.server 8000
```

Then open: http://localhost:8000

### Navigation
1. **Monthly Statistics**: Analyze any month's data across all nurses
2. **Person Details**: Deep dive into individual nurse records
3. **Overview**: High-level statistics and trends

### Color Coding (Calendar View)
- 🟢 **Green**: Work days
- 🔴 **Red**: Legal holidays
- 🟡 **Yellow**: Sick leave
- ⚪ **Gray**: Regular rest days

## Files Structure
```
web/
├── index.html          # Main HTML structure
├── styles.css          # Comprehensive styling
├── analyzer.js         # Data processing and UI logic
└── README.md          # This documentation
```

## Key Features Implemented

✅ **Legal Workday Count**: Properly calculates work expectations  
✅ **Saved Rest Days**: Shows unused rest days  
✅ **Monthly Statistics**: Complete breakdown per person per month  
✅ **Person Details**: Individual career analysis  
✅ **Calendar View**: Visual daily shift representation  
✅ **Sortable Tables**: Multiple sorting options  
✅ **Responsive Design**: Works on desktop and mobile  
✅ **Real-time Calculations**: All statistics computed dynamically  

## Data Requirements

The website expects the database file at:
```
../output/hospital_shifts_2014-04_to_2020-01_database.json
```

This file is generated by running the batch converter:
```bash
node src/batchConverter.js
```